{% extends 'admin/admin.base.html.twig' %}
{% block body %}
<h1>Category list</h1>

<div class="row">
    <div class="col-xs-12">
        <a class="btn btn-default" href="{{ path('admin_area') }}">Back to Admin Area</a>
    </div>
</div>        
<div class="row">    
    <div class="col-xs-12">
        <a class="btn btn-default" href="{{ path('admin_category_new') }}">New category</a>
    </div>
</div>    

<div id="jqgrid-wrapper">
        <table id="jqgrid" class="table table-striped table-hover">
                <tr>
                        <td></td>
                </tr>
        </table>
        <div id="jqgrid-pager"></div>
</div>


{% endblock %}

{% block footer %}
    {{ include('admin/common/admin.footer.html.twig') }}
<script>    
$(document).ready(function(){    
//*******************************************
/*	JQGRID INIT
/********************************************/


function rowActions(cellvalue, options, cellobject) {
      return "<a href='category/edit/" +  options.rowId +"'><u>Edit</u></a>  "+
  	       "<a href='category/delete/" +  options.rowId +"' onclick=\"return confirm('Are you sure to delete?')\"><u>Delete</u></a>";
  }

var grid = $('#jqgrid');

if( $('#jqgrid').length > 0 ) {
        grid.jqGrid({
                url: '{{ path('admin_category_jsondata') }}',
                mtype: 'GET',
                datatype: 'jsonp',
                colNames: [' ', 'Id', 'Name', 'Slug','Position'],
                colModel:[
                        { name:'myac', width:80, fixed:true, sortable:false, resize:false, formatter:rowActions },
                        { name:'ID', index:'id', width:1, editable:false, sortable:false, hidden: true },
                        { name:'Name', index:'name', width: 200, editable:false, sortable:true },
                        { name:'Slug', index:'slug', width: 100, editable:false, sortable:true },
                        { name:'Position', index:'position', align:"right", width: 100, editable:false, sortable:true},
                ],
                height: 300,
                rowNum: 10,
                rowList: [2, 10, 20],
                pager: 'jqgrid-pager',
                sortname: 'position',
                viewrecords: false,
                sortorder: "asc",
                caption: "Categories",
                multiselect: false,
        });
}

}); // end ready function
</script>    
    
{% endblock %}

